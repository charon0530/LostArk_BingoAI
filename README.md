# LostArk_BingoAI

**로스트아크 군단장 레이드 쿠크세이튼의 빙고기믹을 공략하기 위한 빙고 AI**

![image](https://user-images.githubusercontent.com/45917075/175179238-f945bff9-89d9-45d6-86af-d9447e57fc79.png)

>이미지 출처 : https://www.wetrend.co.kr/board/view?board_name=game_board&wr_id=115278&ca_name=&ca=&page=1


## 기믹 설명
로스트아크의 군단장 레이드, 쿠크세이튼은 총 3개 네임드로 이루어진 전투다. 하지만 노멀 난이도는 리허설과 달리 3네임드 클리어 후 앵콜을 외친 쿠크세이튼과 추가 전투를 하게 된다. 일종의 3-2 네임드로, 발탄의 찢겨진 마수의 군주와 유사한 형태라 볼 수 있다.

앵콜을 외친 쿠크세이튼과의 전투는 5x5의 바둑판 모양 타일에서 진행되며, 약 30초마다 캐릭터의 머리 위에 폭탄 아이콘이 생긴다. 잠시 후 캐릭터가 서있는 타일에 폭탄이 설치되고 해당 타일 및 근처 타일이 뒤집어져 해골 문양으로 변경된다. 만약 이미 해골 문양이었다면 문양이 사라진다.

`폭탄 3번이 설치될 때마다 쿠크세이튼이 전멸기를 사용`하는데, `그 타이밍에 해골 문양으로 빙고`를 만들었다면 10초간 무적이 되어 이를 버틸 수 있으며 오히려 쿠크세이튼에게 12~13줄 정도의 대미지를 입힐 수 있다. 즉, 폭탄 3번마다 해골 문양으로 빙고를 만드는 것이 앵콜을 외친 쿠크세이튼 페이즈의 주요 공략법이다.

문제는 해골 문양 타일 위로 올라가면 광기 게이지가 빠르게 차오르는 데다가, 빙고가 만들어진 타일은 다시 뒤집어지지 않는다는 점이다. 만약 폭탄 아이콘이 생긴 채로 해골 문양 위로 올라갔다면 기절이 걸리며 스페이스바를 빠르게 연타해야만 풀려날 수 있다. 즉, 전투가 진행될수록 전장이 좁아지면서 점점 난이도가 높아진다.

>출처 : https://m.inven.co.kr/webzine/wznews.php?idx=255446&site=lostark

요약
1. 클리어 조건은 빙고 개수와는 상관없이 보스의 체력을 0으로 만들면 된다.
2. 빙고 한 줄이 완성되면 10초간 무적이 된다.
3. 폭탄이 3의 배수 일 때 보스가 전멸기를 시전한다.

주의할 점
1. 흰색 해골 장판은 광기 게이지가 찬다.
2. 빨간 해골 장판은 스페이스바 연타로 통과할 수 있다.
3. 흰색 해골 장판을 폭탄을 든 상태에서 밟을 경우 스페이스바 연타로 통과할 수 있다.
4. 폭탄이 3의 배수일 때 보스는 항상 정해진 위치에 나타난다.

O O O O O

O X O O O

O O O O O

O O O O O

O O O O O

위 빙고판을 오른쪽으로 45도 회전

## 빙고 AI 사용법

npm electron-pack 명령어 실행

dist/win-unpacked/bingo-app.exe 실행

![빙고1](https://user-images.githubusercontent.com/45917075/175180499-5a7c5c53-6226-4e89-84c5-c0d645f8ef4c.PNG)

좌측 상단에 현재 라운드(폭탄 개수)가 표시된다.

1. 처음에 주어진 폭탄 2개의 위치를 클릭하여 초기화 시킨다.
2. 초기화가 이루어지면 노란색으로 폭탄 위치를 추천해 준다.

![빙고2](https://user-images.githubusercontent.com/45917075/175181085-c2c9d7af-0e68-4506-9d33-aae71f8ed916.PNG)

3. 노란색 위치에 계속해서 폭탄을 위치시키면 클리어가 가능하다.

![빙고3](https://user-images.githubusercontent.com/45917075/175181865-17a27c99-8262-4345-8804-a0e5b704645a.PNG)

## 주의
1. 일반으로 10~11 라운드면 클리어할 수 있기 때문에 9라운드까지 폭탄 위치를 잘 추천해 주도록 구현하였다. (10,11라운드는 3의 배수가 아니기 때문에 아무 곳에 놓아도 상관없다.)

>Colab 디렉토리에 14라운드까지 추천해 주는 코드도 존재하므로 학습만 시켜 빌드를 다시 해주면 된다.

2. 해당 AI는 이상적인 행동에 주의를 기울이고, 차선책으로 추정되는 행동을 기피하는 Boltzmann 정책을 사용했기에 추천 위치가 아닌 위치에 폭탄이 떨어졌을 경우 정상작동하지 않는다.

> Colab 디렉토리에 epsGreedy_Policy로 학습시켜 빌드하면 탐험(explore)을 더욱 많이 하기에 해당 문제를 해결할 수 있다.

## 사용된 라이브러리/프레임워크
1. OpenAI Gym (환경 구축)
2. tensorflow keras (모델 생성)
3. keras-rl2 (모델 학습)
4. tensorflowjs (App에서 모델 사용)
5. Create React App을 통한 React App 생성
6. Electron (실행파일 생성)
